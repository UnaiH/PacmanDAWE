this.loadLevel = function(){
  	// test5
    	// Tu código aquí
	// leer res/levels/1.txt y guardarlo en el atributo map	
	// haciendo uso de setMapTile
      
     	var direccion = "https://raw.githubusercontent.com/AinhoY/froga/main/1.txt";
      	var level = this;
      	$.ajax({url:direccion,success:function(result){

        	var r2 = JSON.stringify(result);
        	var r3 = r2.split("\\n");

        	level.lvlWidth = r3[0].split(" ")[2];
        	level.lvlHeight = r3[1].split(" ")[2];
        	for (var row=0; row<level.lvlHeight; row++) {
        		var row2 = r3[row+4].trim().split(" ");
          		for (var col=0; col<level.lvlWidth; col++) {
            			var value = row2[col];
				if (value==4) {
                			player.homeX = thisGame.TILE_WIDTH*(col+0.5)-player.radius;
                			player.homeY = thisGame.TILE_HEIGHT*(row+0.5)-player.radius;
					reset();
              			}
            			level.setMapTile(row, col, value);
          		}
        	}

	}});
      
};

this.isWall = function(row, col) {
     	// test7
      	// Tu código aquí

      	var value = this.getMapTile(row, col);
      	return value >= 100 && value <= 199;

};

this.checkIfHitWall = function(possiblePlayerX, possiblePlayerY, row, col) {
      	// test7
      	// Tu código aquí
      	// Determinar si el jugador va a moverse a una fila,columna que tiene pared 
      	// Hacer uso de isWall

	var possiblePlayerX2 = possiblePlayerX + player.radius * 2,
          	possiblePlayerY2 = possiblePlayerY + player.radius * 2,
          	colLeft = Math.floor(possiblePlayerX / thisGame.TILE_WIDTH),
          	colRight = Math.floor(possiblePlayerX2 / thisGame.TILE_WIDTH),
          	rowUp = Math.floor(possiblePlayerY / thisGame.TILE_HEIGHT),
          	rowDown = Math.floor(possiblePlayerY2 / thisGame.TILE_HEIGHT),
          	cols = [colLeft],
          	rows = [rowUp];

      	if (colLeft != colRight) {
        	cols[1] = colRight;
      	}
      	if (rowUp != rowDown) {
        	rows[1] = rowDown;
      	}

      	for (var i = 0; i < rows.length; i++) {
        	var r = rows[i];
        	for (var j = 0; j < cols.length; j++) {
          		var c = cols[j];
          		if (this.isWall(r, c)) {
            			return true;
          		}
        	}
      	}

      	return false;

};

var Pacman = function() {
    	this.radius = 10;
    	this.x = 0;
    	this.y = 0;
    	this.speed = 3;
    	this.angle1 = 0.25;
    	this.angle2 = 1.75;
    	this.velX = 0;
    	this.velY = 0;
    	this.homeX = 0;
    	this.homeY = 0;
    	this.nearestRow = 0;
    	this.nearestCol = 0;
};

Pacman.prototype.move = function() {
    	// test7
    	// Tu código aquí
    
   	if (this.velX != 0) {
      		if (this.x + this.velX >= 0 && this.x + this.velX <= w - this.radius * 2 && !thisLevel.checkIfHitWall(this.x + this.velX, this.y, this.nearestRow, this.nearestCol)) {
        		this.x = this.x + this.velX;
      		}
		else {
        		this.velX = 0;
      		}
    	}
    	else if (this.velY != 0) {
      		if (this.y + this.velY >= 0 && this.y + this.velY <= h - this.radius * 2 && !thisLevel.checkIfHitWall(this.x, this.y + this.velY, this.nearestRow, this.nearestCol)) {
        		this.y = this.y + this.velY;
      		}
		else {
        		this.velY = 0;
      		}
    	}

};

var checkInputs = function() {
    	// test4
    	// Tu código aquí (reestructurado para el test7)

	var velX = player.velX,
        	velY = player.velY;
    
    	if (inputStates.left) {
      		player.velX = -player.speed;
      		player.velY = 0;
    	}
    	else if (inputStates.right) {
      		player.velX = player.speed;
      		player.velY = 0;
    	}
    	else if (inputStates.up) {
      		player.velX = 0;
      		player.velY = -player.speed;
    	}
    	else if (inputStates.down) {
      		player.velX = 0;
      		player.velY = player.speed;
    	}
		
	// test7
	// Tu código aquí
	// LEE bien el enunciado, especialmente la nota de ATENCION que
	// se muestra tras el test 7
    
    	if (thisLevel.checkIfHitWall(player.x+player.velX, player.y+player.velY, player.nearestRow, player.nearestCol)) {
    		player.velX = velX;
      		player.velY = velY;
    	}
};

var reset = function() {
    	// test7
    	// Tu código aquí
    	// Inicialmente Pacman debe empezar a moverse en horizontal hacia la derecha, con una velocidad igual a su atributo speed
    	// inicializa la posición inicial de Pacman tal y como indica el enunciado

	player.x = player.homeX;
	player.y = player.homeY; 
	player.velX = player.speed;
	player.velY = 0;

};